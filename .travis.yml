language: go
sudo: false
dist: trusty
go:
  - 1.9.4
  - "1.10"
  - tip
os:
  - linux
  - osx
matrix:
  allow_failures:
    - go: tip
  fast_finish: true
install:
  - go get github.com/magefile/mage
  - mage vendor
script:
  - mage hugoRace
  - mage -v check
  - ./hugo -s docs/
  - ./hugo --renderToMemory -s docs/
before_install:
  - which asciidoctor || true
  - gem install asciidoctor
  - which asciidoctor || true
  - type asciidoctor || true
